<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <link rel="icon" type="image/png" href="FenorCRY.png">
    
    <title>FENOR | La Ruleta del Infortunio</title>
    
    <meta name="description" content="Sorteos, rewards y la ruleta del infortunio.">
    <meta name="author" content="Fenor">
    <meta name="theme-color" content="#ff003c">

    <meta property="og:title" content="Fenor | Ruleta del Infortunio">
    <meta property="og:description" content="Que la suerte decida tu destino.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://fenorhub.github.io/sorteo/">
    <meta property="og:image" content="https://fenorhub.github.io/sorteo/FenorCRY.png">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Fenor | Ruleta del Infortunio">
    <meta name="twitter:description" content="El dado debe girar siempre.">
    <meta name="twitter:image" content="https://fenorhub.github.io/sorteo/FenorCRY.png">

    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=Inter:wght@400;600&family=Righteous&display=swap" rel="stylesheet">
    <script src="gsap.min.js"></script>
    <style>
        :root { --accent: #ff003c; --bg: #050505; --border: #1a1a1a; }
        body { margin: 0; background: var(--bg); color: #fff; font-family: 'Inter', sans-serif; scroll-snap-type: y mandatory; overflow-x: hidden; }
        
        section { 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            scroll-snap-align: start; 
            border-bottom: 1px solid var(--border);
            padding: 20px;
            box-sizing: border-box;
        }

        h2 { font-family: 'Syncopate'; font-size: 0.8rem; letter-spacing: 5px; color: var(--accent); margin-bottom: 50px; text-align: center; }

        /* --- REDES / LINK --- */
        footer {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
        }
        .twitch-link {
            font-family: 'Syncopate';
            font-size: 0.6rem;
            color: #444;
            text-decoration: none;
            letter-spacing: 2px;
            border: 1px solid #222;
            padding: 10px 15px;
            transition: 0.3s;
            background: rgba(5,5,5,0.8);
        }
        .twitch-link:hover {
            color: #fff;
            border-color: var(--accent);
            box-shadow: 0 0 15px rgba(255, 0, 60, 0.3);
        }

        /* --- DADOS --- */
        .dice-container { display: flex; gap: 80px; margin-bottom: 40px; justify-content: center; align-items: center; }
        .dice-unit { display: flex; flex-direction: column; align-items: center; gap: 35px; }
        .dice-box { width: 100px; height: 100px; perspective: 1000px; }
        .dice-inner { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; transition: 2.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .dice-face { position: absolute; width: 100px; height: 100px; background: #fff; border: 3px solid #000; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: bold; color: #000; box-sizing: border-box; }

        /* --- MONEDAS --- */
        .coins-container { display: flex; gap: 80px; margin-bottom: 40px; justify-content: center; align-items: center; }
        .coin-unit { display: flex; flex-direction: column; align-items: center; gap: 35px; }
        .coin-inner { width: 160px; height: 160px; position: relative; transform-style: preserve-3d; transition: 3s cubic-bezier(0.15, 0, 0.15, 1); }
        .coin-face { position: absolute; width: 100%; height: 100%; border-radius: 50%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; font-size: 5rem; border: 5px solid #222; background: #0a0a0a; box-sizing: border-box; }

        /* --- TRAGAPERRAS --- */
        .slots-machine { display: flex; gap: 20px; background: #000; padding: 25px; border: 4px solid #111; margin-bottom: 40px; }
        .slot-col { width: 100px; display: flex; flex-direction: column; gap: 12px; }
        .slot-box { 
            height: 100px; 
            background: #080808; 
            border: 1px solid #222; 
            font-family: 'Righteous', cursive; 
            font-size: 4rem; 
            line-height: 100px; 
            text-align: center; 
            color: #ffffff; 
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        }

        /* --- RULETA --- */
        .wheel-box { position: relative; width: 420px; height: 420px; margin-bottom: 30px; }
        #canvas { width: 100%; height: 100%; border-radius: 50%; border: 10px solid #111; }
        .pointer { position: absolute; top: -15px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 20px solid transparent; border-right: 20px solid transparent; border-top: 40px solid var(--accent); z-index: 10; filter: drop-shadow(0 0 8px var(--accent)); }

        /* --- UI & LOGS --- */
        button { background: transparent; border: 1px solid #333; color: #888; padding: 15px 35px; font-family: 'Syncopate'; font-size: 0.65rem; cursor: pointer; transition: 0.3s; letter-spacing: 2px; min-width: 160px; }
        button:hover { border-color: var(--accent); color: #fff; background: rgba(255,0,60,0.1); }
        input { background: #000; border: 1px solid #222; color: #fff; padding: 15px; width: 400px; text-align: center; font-family: 'Syncopate'; font-size: 0.6rem; margin-bottom: 25px; outline: none; }
        
        #history { position: fixed; bottom: 20px; right: 20px; width: 280px; background: rgba(5,5,5,0.98); border: 1px solid var(--border); border-top: 3px solid var(--accent); z-index: 1000; }
        #history-header { padding: 12px; background: #111; font-family: 'Syncopate'; font-size: 0.5rem; display: flex; justify-content: space-between; cursor: pointer; letter-spacing: 2px; }
        #log-list { max-height: 300px; overflow-y: auto; }
        .entry { padding: 10px; font-size: 0.75rem; border-bottom: 1px solid #111; display: flex; justify-content: space-between; }
    </style>
</head>
<body>

<footer>
    <a href="https://donfenor.github.io/stream/" target="_blank" class="twitch-link">HUB</a>
</footer>

<audio id="sndDice" src="dados.mp3" preload="auto"></audio>
<audio id="sndCoin" src="moneda.mp3" preload="auto"></audio>
<audio id="sndSlots" src="slots.mp3" preload="auto"></audio>
<audio id="sndWheel" src="ruleta.mp3" preload="auto"></audio>

<div id="history">
    <div id="history-header" onclick="toggleLogs()">
        <span>HISTORIAL</span>
        <span>[ - ]</span>
    </div>
    <div id="log-list"></div>
</div>

<section>
    <h2>DADOS</h2>
    <div class="dice-container">
        <div class="dice-unit">
            <div class="dice-box">
                <div id="dice1" class="dice-inner">
                    <div class="dice-face" style="transform:rotateY(0deg) translateZ(50px)">1</div>
                    <div class="dice-face" style="transform:rotateY(180deg) translateZ(50px)">2</div>
                    <div class="dice-face" style="transform:rotateY(90deg) translateZ(50px)">3</div>
                    <div class="dice-face" style="transform:rotateY(-90deg) translateZ(50px)">4</div>
                    <div class="dice-face" style="transform:rotateX(90deg) translateZ(50px)">5</div>
                    <div class="dice-face" style="transform:rotateX(-90deg) translateZ(50px)">6</div>
                </div>
            </div>
            <button onclick="rollDice(1)">IZQUIERDO</button>
        </div>
        <div class="dice-unit">
            <div class="dice-box">
                <div id="dice2" class="dice-inner">
                    <div class="dice-face" style="transform:rotateY(0deg) translateZ(50px)">1</div>
                    <div class="dice-face" style="transform:rotateY(180deg) translateZ(50px)">2</div>
                    <div class="dice-face" style="transform:rotateY(90deg) translateZ(50px)">3</div>
                    <div class="dice-face" style="transform:rotateY(-90deg) translateZ(50px)">4</div>
                    <div class="dice-face" style="transform:rotateX(90deg) translateZ(50px)">5</div>
                    <div class="dice-face" style="transform:rotateX(-90deg) translateZ(50px)">6</div>
                </div>
            </div>
            <button onclick="rollDice(2)">DERECHO</button>
        </div>
    </div>
</section>

<section>
    <h2>MONEDAS</h2>
    <div class="coins-container">
        <div class="coin-unit">
            <div class="coin-inner" id="coin1"><div class="coin-face">‚ò†Ô∏è</div><div class="coin-face" style="transform:rotateY(180deg);color:var(--accent)">üêâ</div></div>
            <button onclick="flip(1)">IZQUIERDA</button>
        </div>
        <div class="coin-unit">
            <div class="coin-inner" id="coin2"><div class="coin-face">‚ò†Ô∏è</div><div class="coin-face" style="transform:rotateY(180deg);color:var(--accent)">üêâ</div></div>
            <button onclick="flip(2)">DERECHA</button>
        </div>
    </div>
</section>

<section>
    <h2>TRAGAPERRAS</h2>
    <div class="slots-machine">
        <div class="slot-col" id="col1"><div class="slot-box">7</div><div class="slot-box">0</div><div class="slot-box">3</div></div>
        <div class="slot-col" id="col2"><div class="slot-box">7</div><div class="slot-box">0</div><div class="slot-box">3</div></div>
        <div class="slot-col" id="col3"><div class="slot-box">7</div><div class="slot-box">0</div><div class="slot-box">3</div></div>
    </div>
    <button onclick="spinSlots()">EMPEZAR</button>
</section>

<section>
    <h2>RULETA DEL INFORTUNIO</h2>
    <div class="wheel-box"><div class="pointer"></div><canvas id="canvas" width="600" height="600"></canvas></div>
    <input type="text" id="options" value="KEY, NADA, TIMEOUT, DADOS, TRAGAPERRAS, MONEDAS, DE NUEVO" oninput="drawWheel()">
    <button onclick="spinWheel()">GIRAR</button>
</section>

<script>
    const playSound = (id) => {
        const s = document.getElementById(id);
        if(s) { s.currentTime = 0; s.play(); }
    };

    const addLog = (t, r) => {
        const e = document.createElement('div'); e.className = 'entry';
        e.innerHTML = `<span><b style="color:var(--accent)">${t}:</b> ${r}</span><span style="color:#444">${new Date().toLocaleTimeString()}</span>`;
        document.getElementById('log-list').prepend(e);
    };

    function toggleLogs() {
        const list = document.getElementById('log-list');
        list.style.display = list.style.display === 'none' ? 'block' : 'none';
    }

    // --- L√ìGICA DE DADOS ---
    let dX1=0, dY1=0, dX2=0, dY2=0;
    function rollDice(n) {
        playSound('sndDice');
        const r = Math.floor(Math.random()*6);
        const rots = [{x:0, y:0}, {x:0, y:180}, {x:0, y:-90}, {x:0, y:90}, {x:-90, y:0}, {x:90, y:0}];
        
        if(n === 1) {
            dX1 += 1080 - (dX1 % 360) + rots[r].x; 
            dY1 += 1080 - (dY1 % 360) + rots[r].y;
            document.getElementById('dice1').style.transform = `rotateX(${dX1}deg) rotateY(${dY1}deg)`;
        } else {
            dX2 += 1080 - (dX2 % 360) + rots[r].x; 
            dY2 += 1080 - (dY2 % 360) + rots[r].y;
            document.getElementById('dice2').style.transform = `rotateX(${dX2}deg) rotateY(${dY2}deg)`;
        }
        setTimeout(() => addLog(n === 1 ? 'DADO_IZQ' : 'DADO_DER', r+1), 2500);
    }

    // --- MONEDAS ---
    let c1R=0, c2R=0;
    function flip(n) {
        playSound('sndCoin');
        const side = Math.random() > 0.5;
        if(n==1) { 
            c1R += 1800; if(side) c1R += 180;
            if(c1R % 360 !== (side ? 180 : 0)) c1R += 180;
            document.getElementById('coin1').style.transform = `rotateY(${c1R}deg)`; 
        }
        else { 
            c2R += 1800; if(side) c2R += 180;
            if(c2R % 360 !== (side ? 180 : 0)) c2R += 180;
            document.getElementById('coin2').style.transform = `rotateY(${c2R}deg)`; 
        }
        setTimeout(() => addLog(`MONEDA_${n==1?'IZQ':'DER'}`, side?'üêâ':'‚ò†Ô∏è'), 3000);
    }

    // --- SLOTS ---
    function spinSlots() {
        playSound('sndSlots');
        [1,2,3].forEach(c => {
            let count = 0, max = 15 + (c*10);
            const t = setInterval(() => {
                const b = document.getElementById(`col${c}`).children;
                for(let x of b) x.innerText = Math.floor(Math.random()*10);
                if(++count > max) { clearInterval(t); if(c==3) addLog('TRAGAPERRAS', 'LISTO'); }
            }, 80);
        });
    }

    // --- RULETA ---
    const canvas = document.getElementById('canvas'), ctx = canvas.getContext('2d');
    function drawWheel() {
        const opt = document.getElementById('options').value.split(',').map(x => x.trim());
        const arc = (Math.PI*2)/opt.length;
        ctx.clearRect(0,0,600,600);
        opt.forEach((text, i) => {
            const ang = i * arc - Math.PI/2;
            ctx.fillStyle = i%2==0 ? '#0a0a0a' : '#151515';
            ctx.beginPath(); ctx.moveTo(300,300); ctx.arc(300,300,295, ang, ang+arc); ctx.fill();
            ctx.save(); ctx.translate(300,300); ctx.rotate(ang + arc/2);
            ctx.textAlign="right"; ctx.fillStyle="#fff"; ctx.font="bold 20px Syncopate";
            ctx.fillText(text.toUpperCase(), 270, 10); ctx.restore();
        });
    }

    let currentRot = 0;
    function spinWheel() {
        playSound('sndWheel');
        const opt = document.getElementById('options').value.split(',').map(x => x.trim());
        const resIdx = Math.floor(Math.random()*opt.length);
        const arcDeg = 360/opt.length;
        const targetRot = (360 - (resIdx * arcDeg)) - (arcDeg/2);
        currentRot += 3600 + targetRot - (currentRot%360);
        gsap.to(canvas, {
            rotation: currentRot,
            duration: 5,
            ease: "power4.out",
            onComplete: () => addLog('RULETA', opt[resIdx].toUpperCase())
        });
    }
    window.onload = drawWheel;
</script>
</body>
 
</html>


